<!DOCTYPE html>
<html lang="vi">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Thi·ªáp 20/10 ‚Äî Playlist (Fix center)</title>
<style>
  :root{
    --pink:#ff5fa2;
    --bg:#ffeaf4;
  }
  body{
    margin:0; font-family:Poppins, system-ui, Arial; background: linear-gradient(180deg,#ffeaf4,#ffd6e8);
    color:#333; overflow-x:hidden;
  }

  /* hoa r∆°i */
  .flower{position:fixed;top:-50px;width:26px;height:26px;z-index:1;pointer-events:none;opacity:.95;animation:fall linear infinite}
  @keyframes fall{0%{transform:translateY(0) rotate(0)}100%{transform:translateY(110vh) rotate(360deg)}}

  /* playlist area - cƒÉn gi·ªØa, chi·∫øm 80% */
  .playlist-area{width:80%;margin:70px auto 0;position:relative;z-index:2}
  .viewport{height:340px;overflow:hidden;display:flex;align-items:center;justify-content:center}
  .playlist{display:flex;align-items:center;transition:transform .7s cubic-bezier(.2,.9,.2,1);will-change:transform}
  .track{flex:0 0 300px;margin:0 12px;opacity:.45;transform:scale(.8);transition:all .5s ease; border-radius:14px; overflow:hidden; box-shadow:0 6px 18px rgba(0,0,0,.12); background:#fff}
  .track.active{opacity:1; transform:scale(1.15); box-shadow:0 12px 40px rgba(255,95,162,.28)}
  video{display:block;width:100%;height:210px;object-fit:cover}

  /* controls */
  .controls{display:flex;gap:22px;justify-content:center;margin-top:20px}
  .btn{width:62px;height:62px;border-radius:50%;border:none;background:linear-gradient(135deg,#ff8fb1,#ff3b8d);color:#fff;font-size:22px;cursor:pointer;box-shadow:0 8px 18px rgba(255,95,162,.25)}
  .btn:hover{transform:scale(1.05)}

  /* card (l·ªùi ch√∫c) */
  .card{width:70%;margin:60px auto;padding:32px;border-radius:20px;background:rgba(255,255,255,.9);box-shadow:0 10px 30px rgba(255,182,193,.25);text-align:center}
  .card h1{margin:0 0 12px;color:var(--pink)}
  .card p{margin:0;color:#444;line-height:1.7}
  @media (max-width:980px){
    .playlist-area{width:94%}
    .track{flex:0 0 220px}
    .track.active{transform:scale(1.05)}
    video{height:160px}
  }
</style>
</head>
<body>

<!-- üå∏ ƒë·ªïi icon r∆°i -->
<script>
  // m·∫£ng icon PNG n·ªÅn trong su·ªët (hoa, sao, n·ªët nh·∫°c)
  const icons = [
    'file:///C:/Users/Latitude%20E5480/Downloads/flower.png', // hoa h·ªìng
    'file:///C:/Users/Latitude%20E5480/Downloads/bouquet.png', // sao blink
    'file:///C:/Users/Latitude%20E5480/Downloads/musical-note.png', // n·ªët nh·∫°c
    'file:///C:/Users/Latitude%20E5480/Downloads/star.png', // hoa sakura
    'https://cdn-icons-png.flaticon.com/512/1828/1828884.png'  // ng√¥i sao v√†ng cute
  ];

  function createFallingIcon(){
    const f = document.createElement('img');
    f.className = 'flower';
    f.src = icons[Math.floor(Math.random() * icons.length)];
    f.style.left = Math.random() * 100 + 'vw';
    f.style.animationDuration = 4 + Math.random() * 6 + 's';
    f.style.width = 18 + Math.random() * 18 + 'px';
    document.body.appendChild(f);
    setTimeout(() => f.remove(), 12000);
  }

  // t·∫°o 20 icon ban ƒë·∫ßu
  for (let i = 0; i < 20; i++) createFallingIcon();
  // th√™m icon m·ªõi li√™n t·ª•c
  setInterval(createFallingIcon, 500);
</script>

<!-- ph·∫ßn c√≤n l·∫°i gi·ªØ nguy√™n -->
<div class="playlist-area">
  <h2 style="color:var(--pink);text-align:center;margin:0 0 12px">üíû Playlist video ch√∫c m·ª´ng 20/10</h2>

  <div class="viewport" id="viewport">
    <div class="playlist" id="playlist">
      <div class="track"><video src="playlist1.mp4" preload="metadata"></video></div>
      <div class="track"><video src="playlist2-1.mp4" preload="metadata"></video></div>
      <div class="track"><video src="playlist3.mp4" preload="metadata"></video></div>
      <div class="track"><video src="playlist2.mp4" preload="metadata"></video></div>
      <div class="track"><video src="playlist5.mp4" preload="metadata"></video></div>
      <div class="track"><video src="playlist6.mp4" preload="metadata"></video></div>
      <div class="track"><video src="playlist7.mp4" preload="metadata"></video></div>
      <div class="track"><video src="playlist8.mp4" preload="metadata"></video></div>
      <div class="track"><video src="playlist9.mp4" preload="metadata"></video></div>
      <div class="track"><video src="playlist10.mp4" preload="metadata"></video></div>
    </div>
    </div>
  </div>

  <div class="controls">
    <button class="btn" id="prev">‚èÆ</button>
    <button class="btn" id="play">‚èØ</button>
    <button class="btn" id="next">‚è≠</button>
  </div>
</div>

<div class="card">
  <h1>üíê Ch√∫c m·ª´ng ng√†y Ph·ª• n·ªØ Vi·ªát Nam 20/10 üíê</h1>
  <p>
    G·ª≠i ƒë·∫øn t·∫•t c·∫£ c√°c b·∫°n n·ªØ l·ªõp 67D ‚Äî ch√∫c c√°c b·∫°n lu√¥n xinh ƒë·∫πp, t·ª± tin v√† tr√†n ƒë·∫ßy nƒÉng l∆∞·ª£ng!
    M·ªói ng√†y ƒë·∫øn l·ªõp ƒë·ªÅu l√† m·ªôt ng√†y th·∫≠t r·ª±c r·ª°, ng·∫≠p tr√†n ti·∫øng c∆∞·ªùi v√† ni·ªÅm vui.
  </p>
</div>

<script>
(function(){
  const playlist = document.getElementById('playlist');
  const viewport = document.getElementById('viewport');
  const tracks = Array.from(playlist.querySelectorAll('.track'));
  const videos = tracks.map(t => t.querySelector('video'));
  const prevBtn = document.getElementById('prev');
  const nextBtn = document.getElementById('next');
  const playBtn = document.getElementById('play');

  let current = 0;

  function getCurrentTranslateX(el){
    const st = window.getComputedStyle(el);
    const tr = st.transform || st.webkitTransform;
    if(!tr || tr === 'none') return 0;
    const m = new DOMMatrixReadOnly(tr);
    return m.m41;
  }

  function centerActive(){
    const activeTrack = tracks[current];
    const viewportRect = viewport.getBoundingClientRect();
    const activeRect = activeTrack.getBoundingClientRect();
    const viewportCenterX = viewportRect.left + viewportRect.width/2;
    const activeCenterX = activeRect.left + activeRect.width/2;
    const delta = viewportCenterX - activeCenterX;
    const currentTx = getCurrentTranslateX(playlist);
    const newTx = currentTx + delta;
    playlist.style.transform = `translateX(${newTx}px)`;
  }

  function updateVisuals(){
    tracks.forEach((t,i)=>{
      t.classList.remove('active');
      t.style.opacity = '0.45';
      t.style.transform = 'scale(.8)';
    });

    tracks[current].classList.add('active');
    tracks[current].style.opacity = '1';
    tracks[current].style.transform = 'scale(1.15)';

    if(tracks[current-1]) { tracks[current-1].style.opacity='0.75'; tracks[current-1].style.transform='scale(.95)'; }
    if(tracks[current+1]) { tracks[current+1].style.opacity='0.75'; tracks[current+1].style.transform='scale(.95)'; }
    if(tracks[current-2]) { tracks[current-2].style.opacity='0.55'; tracks[current-2].style.transform='scale(.85)'; }
    if(tracks[current+2]) { tracks[current+2].style.opacity='0.55'; tracks[current+2].style.transform='scale(.85)'; }

    videos.forEach((v,idx)=>{ if(idx!==current){ v.pause(); v.currentTime = 0; } });
    requestAnimationFrame(()=> requestAnimationFrame(centerActive));
  }

  function goTo(index){
    current = ((index % tracks.length) + tracks.length) % tracks.length;
    updateVisuals();
    const v = videos[current];
    v.play().catch(()=>{});
  }

  prevBtn.addEventListener('click', ()=> goTo(current-1));
  nextBtn.addEventListener('click', ()=> goTo(current+1));
  playBtn.addEventListener('click', ()=>{
    const v = videos[current];
    if(v.paused) v.play(); else v.pause();
  });

  document.addEventListener('keydown', (e)=>{
    if(e.key==='ArrowLeft') prevBtn.click();
    if(e.key==='ArrowRight') nextBtn.click();
    if(e.key===' ') { e.preventDefault(); playBtn.click(); }
  });

  window.addEventListener('resize', ()=> {
    requestAnimationFrame(()=> centerActive());
  });

  playlist.style.transform = 'translateX(0px)';
  setTimeout(()=> goTo(0), 120);
})();
</script>
</body>
</html>
